<!DOCTYPE html>
<!-- Default page header to be included in route template -->

<html>
<head>
	<title>Test JS ARray</title>
	
<style>

</style>	


</head>
<body>
		
	<table  style="border:1px solid black; padding:1px 10px 1px 5px;">
	  <tr>
	    <td><label for="inputCountry">Country</label></td>	
	    <td><input id="inputCountry" type="text" value="Canada" onchange="fUpdateCountry(this.value);" /> </td>
	  </tr>

	  
	  <tr id="ProvSel">
	    <td><label for="provsel">Province / State</label></td>	
	    <td><input list="provsel-list" id="provsel" name="provsel" onfocusout="fUpdateCities(this.value)" /></td>
	  </tr>	
	  	  
	  <tr id="CitySel">
			<td><label for="citysel">City / Town</label></td>	
			<td><input list="citysel-list" id="citysel" name="citysel" /> </td>	
	  </tr>

	  <tr >
	    <td>Street Number</td>	
	    <td><input type="text" /> </td>
	  </tr>		  
	  <tr >
	    <td>Street Name</td>	
	    <td><input type="text" /> </td>
	  </tr>		  	  
	  <tr >
	    <td>Postal / Zip Code</td>	
	    <td><input type="text" /> </td>
	  </tr>		  	  	  
	  <tr >
	    <td>...and so on</td>	
	    <td><input type="text" /> </td>
	  </tr>	
	  	  	  
	</table>
<p/>
 
<datalist id="provsel-list"> </datalist>
<datalist id="citysel-list"> </datalist>

</body>


<script type="text/javascript">
'use strict';

const cPROVS = [
 {"value":"AB", "display":"Alberta"},
 {"value":"BC", "display":"British Columbia"},
 {"value":"MB", "display":"Manitoba"}
]
//, , "", "New Brunswick", "Newfoundland and Labrador", "Northwest Territories", "Nova Scotia", "Nunavut", "Ontario", "Prince Edward Island", "Quebec", "Saskatchewan", "Yukon"]

const cCITIES = [
{"city":"Airdrie","prov":"Alberta"},
{"city":"Edmonton","prov":"Alberta"},
{"city":"Fort McMurray","prov":"Alberta"},
{"city":"Grande Prairie","prov":"Alberta"},
{"city":"Leduc","prov":"Alberta"},
{"city":"Lethbridge","prov":"Alberta"},
{"city":"Medicine Hat","prov":"Alberta"},
{"city":"Red Deer","prov":"Alberta"},
{"city":"Spruce Grove","prov":"Alberta"},
{"city":"St. Albert","prov":"Alberta"},
{"city":"Chilliwack","prov":"British Columbia"},
{"city":"Kamloops","prov":"British Columbia"},
{"city":"Kelowna","prov":"British Columbia"},
{"city":"Nanaimo","prov":"British Columbia"},
{"city":"Prince George","prov":"British Columbia"},
{"city":"Vancouver","prov":"British Columbia"},
{"city":"Vernon","prov":"British Columbia"},
{"city":"Victoria","prov":"British Columbia"},
{"city":"White Rock","prov":"British Columbia"},
{"city":"Vancouver","prov":"British Columbia"},
{"city":"Altona","prov":"Manitoba"},
{"city":"Beausejour","prov":"Manitoba"},
{"city":"Brandon","prov":"Manitoba"},
{"city":"Carman","prov":"Manitoba"},
{"city":"Dauphin","prov":"Manitoba"},
{"city":"Flin Flon","prov":"Manitoba"},
{"city":"Garden Hill First Nation","prov":"Manitoba"},
{"city":"Lorette","prov":"Manitoba"},
{"city":"Morden","prov":"Manitoba"},
{"city":"Neepawa","prov":"Manitoba"},
{"city":"Niverville","prov":"Manitoba"},
{"city":"Norway House 17","prov":"Manitoba"},
{"city":"Oakbank","prov":"Manitoba"},
{"city":"Peguis 1B","prov":"Manitoba"},
{"city":"Portage la Prairie","prov":"Manitoba"},
{"city":"Selkirk","prov":"Manitoba"},
{"city":"St. Theresa Point","prov":"Manitoba"},
{"city":"Steinbach","prov":"Manitoba"},
{"city":"Stonewall","prov":"Manitoba"},
{"city":"Swan River","prov":"Manitoba"},
{"city":"The Pas","prov":"Manitoba"},
{"city":"Thompson","prov":"Manitoba"},
{"city":"Virden","prov":"Manitoba"},
{"city":"Winkler","prov":"Manitoba"},
{"city":"Winnipeg","prov":"Manitoba"},
{"city":"Bathurst","prov":"New Brunswick"},
{"city":"Dieppe","prov":"New Brunswick"},
{"city":"Edmundston","prov":"New Brunswick"},
{"city":"Fredericton","prov":"New Brunswick"},
{"city":"Miramichi","prov":"New Brunswick"},
{"city":"Moncton","prov":"New Brunswick"},
{"city":"Quispamsis","prov":"New Brunswick"},
{"city":"Riverview","prov":"New Brunswick"},
{"city":"Saint John","prov":"New Brunswick"},
{"city":"Tracadie","prov":"New Brunswick"},
{"city":"Conception Bay South","prov":"Newfoundland and Labrador"},
{"city":"Corner Brook","prov":"Newfoundland and Labrador"},
{"city":"Gander","prov":"Newfoundland and Labrador"},
{"city":"Grand Falls-Windsor","prov":"Newfoundland and Labrador"},
{"city":"Happy Valley-Goose Bay","prov":"Newfoundland and Labrador"},
{"city":"Mount Pearl","prov":"Newfoundland and Labrador"},
{"city":"Paradise","prov":"Newfoundland and Labrador"},
{"city":"Portugal Cove-St. Philip's","prov":"Newfoundland and Labrador"},
{"city":"St. John's","prov":"Newfoundland and Labrador"},
{"city":"Torbay","prov":"Newfoundland and Labrador"},
{"city":"Behchoko","prov":"Northwest Territories"},
{"city":"Fort Smith","prov":"Northwest Territories"},
{"city":"Hay River","prov":"Northwest Territories"},
{"city":"Inuvik","prov":"Northwest Territories"},
{"city":"Yellowknife","prov":"Northwest Territories"},
{"city":"Annapolis","prov":"Nova Scotia"},
{"city":"Cape Breton","prov":"Nova Scotia"},
{"city":"Colchester","prov":"Nova Scotia"},
{"city":"Cumberland","prov":"Nova Scotia"},
{"city":"East Hants","prov":"Nova Scotia"},
{"city":"Halifax","prov":"Nova Scotia"},
{"city":"Kings","prov":"Nova Scotia"},
{"city":"Lunenburg","prov":"Nova Scotia"},
{"city":"Pictou","prov":"Nova Scotia"},
{"city":"West Hants","prov":"Nova Scotia"},
{"city":"Arviat","prov":"Nunavut"},
{"city":"Iqaluit","prov":"Nunavut"},
{"city":"Rankin Inlet","prov":"Nunavut"},
{"city":"Barrie","prov":"Ontario"},
{"city":"Guelph","prov":"Ontario"},
{"city":"Hamilton","prov":"Ontario"},
{"city":"Kitchener","prov":"Ontario"},
{"city":"London","prov":"Ontario"},
{"city":"Oshawa","prov":"Ontario"},
{"city":"Ottawa","prov":"Ontario"},
{"city":"St. Catharines","prov":"Ontario"},
{"city":"Toronto","prov":"Ontario"},
{"city":"Windsor","prov":"Ontario"},
{"city":"Afton","prov":"Prince Edward Island"},
{"city":"Belfast","prov":"Prince Edward Island"},
{"city":"Charlottetown","prov":"Prince Edward Island"},
{"city":"Cornwall","prov":"Prince Edward Island"},
{"city":"Kensington","prov":"Prince Edward Island"},
{"city":"Miltonvale Park","prov":"Prince Edward Island"},
{"city":"North Shore","prov":"Prince Edward Island"},
{"city":"Stratford","prov":"Prince Edward Island"},
{"city":"Summerside","prov":"Prince Edward Island"},
{"city":"Three Rivers","prov":"Prince Edward Island"},
{"city":"Gatineau","prov":"Quebec"},
{"city":"Laval","prov":"Quebec"},
{"city":"Lévis","prov":"Quebec"},
{"city":"Longueuil","prov":"Quebec"},
{"city":"Montreal","prov":"Quebec"},
{"city":"Qué	bec","prov":"Quebec"},
{"city":"Saguenay","prov":"Quebec"},
{"city":"Sherbrooke","prov":"Quebec"},
{"city":"Terrebonne","prov":"Quebec"},
{"city":"Trois-Rivières","prov":"Quebec"},
{"city":"Estevan","prov":"Saskatchewan"},
{"city":"Lloydminster","prov":"Saskatchewan"},
{"city":"Moose Jaw","prov":"Saskatchewan"},
{"city":"North Battleford","prov":"Saskatchewan"},
{"city":"Prince Albert","prov":"Saskatchewan"},
{"city":"Regina","prov":"Saskatchewan"},
{"city":"Saskatoon","prov":"Saskatchewan"},
{"city":"Swift Current","prov":"Saskatchewan"},
{"city":"Warman","prov":"Saskatchewan"},
{"city":"Yorkton","prov":"Saskatchewan"},
{"city":"Dawson","prov":"Yukon"},
{"city":"Watson Lake","prov":"Yukon"},
{"city":"Whitehorse","prov":"Yukon"}
];


window.onload = function()
{
	fPopulateCanadianProvinces();
	document.getElementById('citysel').placeholder = "";
	//document.getElementById('provsel').value = 'Manitoba';
	//fUpdateCities('Manitoba');
}

function fClearProvList() {
	document.getElementById('provsel').value = '';
	
	let dlList = document.getElementById('provsel-list');
	
	while (dlList.children.length > 0) { 
	  dlList.children[0].remove(); 
	}	
}

function fClearCityList()  {
	document.getElementById('citysel').value = '';
	
	let dlList = document.getElementById('citysel-list');
	
	while (dlList.children.length > 0) { 
	  dlList.children[0].remove(); 
	}		
}

function fPopulateCanadianProvinces() 
{
	fClearProvList();
	
	const aProvList = [...new Set(cCITIES.map(item => item.prov))];
	console.log(aProvList);
	let dlProvs = document.getElementById('provsel-list');
	
	
	aProvList.forEach(function(item){
		var option = document.createElement('option');
		option.value = item;
		dlProvs.appendChild(option);
	});

	document.getElementById('provsel').placeholder = "Select your Province";
	fUpdateCities('');		// Clear city list		
}

function fUpdateCities( sProv ) 
{
	fClearCityList();
	
	const aCityList = cCITIES.filter( (item) => item.prov === sProv );
	let dlList = document.getElementById('citysel-list');
	
	aCityList.forEach(function(item){
		var option = document.createElement('option');
		option.value = item.city;
		dlList.appendChild(option);
	});
	
	if ( dlList.children.length > 0 )
		document.getElementById('citysel').placeholder = "Select / enter your City";
	else
		document.getElementById('citysel').placeholder = "Enter your City / Town";

}


function fUpdateCountry( sCountry ) {
	
	const cVal = sCountry.trim().toLowerCase();
	if ( cVal === 'canada' || cVal === 'cad' || cVal === 'cdn' ) 
	{
		fPopulateCanadianProvinces();
		
	}
	else
	{
		fClearProvList();
		fClearCityList();
		document.getElementById('provsel').placeholder = "Enter your Prov / State";
		document.getElementById('citysel').placeholder = "Enter your City / Town";
		
	}
}

</script>


</html>
